<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scorpion Copilot - AI Trading Intelligence</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        .navbar {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(to right, #60a5fa, #a78bfa, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            list-style: none;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: #94a3b8;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        
        .nav-dropdown {
            position: relative;
            display: inline-block;
        }

        .nav-dropdown-content {
            display: none;
            position: absolute;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            min-width: 200px;
            z-index: 1000;
            top: 100%;
            left: 0;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .nav-dropdown-content a {
            color: #94a3b8;
            padding: 0.75rem 1rem;
            text-decoration: none;
            display: block;
            border-radius: 0;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .nav-dropdown-content a:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
        }

        .nav-dropdown:hover .nav-dropdown-content {
            display: block;
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .nav-dropdown:hover .nav-dropdown-btn {
            color: #60a5fa;
            background: rgba(59, 130, 246, 0.1);
        }

        .nav-dropdown-btn {
            color: #94a3b8;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .nav-dropdown-btn::after {
            content: 'â–¼';
            font-size: 0.7rem;
            transition: transform 0.3s;
        }

        .nav-dropdown:hover .nav-dropdown-btn::after {
            transform: rotate(180deg);
        }
        .nav-links a:hover, .nav-links a.active {
            color: #60a5fa;
            background: rgba(59, 130, 246, 0.1);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(to right, #60a5fa, #a78bfa, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .portfolio-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .summary-card {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            text-align: center;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
        }

        .summary-card .value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #60a5fa;
            margin-bottom: 0.5rem;
        }

        .summary-card .label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .summary-card .change {
            font-size: 1rem;
            font-weight: bold;
            margin-top: 0.5rem;
        }

        .summary-card .change.positive {
            color: #22c55e;
        }

        .summary-card .change.negative {
            color: #ef4444;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .portfolio-section {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .portfolio-section h2 {
            color: #60a5fa;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .portfolio-item {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr 1fr;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.1);
            align-items: center;
            transition: all 0.3s;
        }

        .portfolio-item:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .portfolio-item:last-child {
            border-bottom: none;
        }

        .portfolio-header {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr 1fr;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 2px solid rgba(59, 130, 246, 0.3);
            font-weight: bold;
            color: #60a5fa;
            margin-bottom: 1rem;
        }

        .asset-info {
            display: flex;
            flex-direction: column;
        }

        .asset-ticker {
            font-weight: bold;
            color: #e2e8f0;
            font-size: 1.1rem;
        }

        .asset-name {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .asset-price {
            font-weight: bold;
            color: #e2e8f0;
        }

        .asset-change {
            font-weight: bold;
        }

        .asset-change.positive {
            color: #22c55e;
        }

        .asset-change.negative {
            color: #ef4444;
        }

        .asset-value {
            font-weight: bold;
            color: #e2e8f0;
        }

        .asset-weight {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .chart-container {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .chart-container h2 {
            color: #60a5fa;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .metric-card {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #60a5fa;
        }

        .metric-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 0.3rem;
        }

        .add-position-btn {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 2rem;
        }

        .add-position-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(96, 165, 250, 0.4);
        }

        .watchlist-section {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .watchlist-section h2 {
            color: #60a5fa;
            margin-bottom: 1.5rem;
        }

        .watchlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.1);
            transition: all 0.3s;
        }

        .watchlist-item:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .watchlist-item:last-child {
            border-bottom: none;
        }

        .watchlist-ticker {
            font-weight: bold;
            color: #e2e8f0;
        }

        .watchlist-price {
            color: #94a3b8;
        }

        .watchlist-change {
            font-weight: bold;
        }

        .watchlist-change.positive {
            color: #22c55e;
        }

        .watchlist-change.negative {
            color: #ef4444;
        }

        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .portfolio-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .portfolio-header {
                display: none;
            }
            
            .nav-links {
            display: flex;
            gap: 1rem;
            list-style: none;
            flex-wrap: wrap;
        }
            
            .nav-links a {
            color: #94a3b8;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">Scorpion Copilot</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="ScorpionCopilot_Dashboard.html">Dashboard</a></li>
                <li><a href="live-feed.html">Live Feed</a></li>
                <li><a href="top-opportunities.html">Top Opportunities</a></li>
                <li class="nav-dropdown">
                    <span class="nav-dropdown-btn">Analysis</span>
                    <div class="nav-dropdown-content">
                        <a href="news.html">News & Analysis</a>
                        <a href="portfolio.html" class="active">Portfolio</a>
                        <a href="alerts.html">Alerts</a>
                    </div>
                </li>
                <li class="nav-dropdown">
                    <span class="nav-dropdown-btn">Tools</span>
                    <div class="nav-dropdown-content">
                        <a href="chatbot.html">AI Chat</a>
                        <a href="trading212-import.html">Trading212 Import</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>Portfolio Management</h1>
            <p style="color: #94a3b8; font-size: 1.1rem;">
                Track your investments, analyze performance, and optimize your portfolio with AI-powered insights
            </p>
        </div>

        <div class="portfolio-summary">
            <div class="summary-card">
                <div class="value">$125,430</div>
                <div class="label">Total Portfolio Value</div>
                <div class="change positive">+$2,340 (+1.9%)</div>
                </div>
            <div class="summary-card">
                <div class="value">$8,250</div>
                <div class="label">Today's Gain/Loss</div>
                <div class="change positive">+$1,890 (+2.3%)</div>
                </div>
            <div class="summary-card">
                <div class="value">15.2%</div>
                <div class="label">YTD Return</div>
                <div class="change positive">+2.1%</div>
                </div>
            <div class="summary-card">
                <div class="value">12</div>
                <div class="label">Positions</div>
                <div class="change">Active</div>
            </div>
        </div>

        <div style="text-align: center;">
            <button class="add-position-btn" onclick="addPosition()">+ Add Position</button>
            <button class="add-position-btn" onclick="importTrading212()" style="background: linear-gradient(135deg, #22c55e, #16a34a); margin-left: 1rem;">ðŸ“Š Import Trading212</button>
        </div>

        <div class="content-grid">
            <div class="main-content">
                <div class="portfolio-section">
                    <h2>ðŸ“Š Current Positions</h2>
                    <div class="portfolio-header">
                        <div>Asset</div>
                        <div>Details</div>
                        <div>Price</div>
                        <div>Change</div>
                        <div>Value</div>
                    </div>
                    <div id="portfolioContainer">
                        <!-- Portfolio items will be loaded here -->
                </div>
            </div>

                <div class="chart-container">
                    <h2>ðŸ“ˆ Portfolio Performance</h2>
                    <div class="chart-wrapper">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                    <div class="performance-metrics">
                        <div class="metric-card">
                            <div class="metric-value">15.2%</div>
                            <div class="metric-label">YTD Return</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">1.24</div>
                            <div class="metric-label">Sharpe Ratio</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">12.8%</div>
                            <div class="metric-label">Max Drawdown</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">0.85</div>
                            <div class="metric-label">Beta</div>
                        </div>
                </div>
            </div>
        </div>

            <div class="sidebar">
                <div class="watchlist-section">
                    <h2>ðŸ‘€ Watchlist</h2>
                    <div id="watchlistContainer">
                        <!-- Watchlist items will be loaded here -->
                    </div>
                    </div>

                <div class="portfolio-section">
                    <h2>ðŸŽ¯ AI Recommendations</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <div style="padding: 1rem; background: rgba(34, 197, 94, 0.1); border-radius: 8px;">
                            <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">Consider Adding</div>
                            <div style="color: #94a3b8; font-size: 0.9rem;">NVDA - Strong AI momentum</div>
                    </div>
                        <div style="padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px;">
                            <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">Consider Reducing</div>
                            <div style="color: #94a3b8; font-size: 0.9rem;">XOM - Energy volatility</div>
                    </div>
                        <div style="padding: 1rem; background: rgba(59, 130, 246, 0.1); border-radius: 8px;">
                            <div style="color: #60a5fa; font-weight: bold; margin-bottom: 0.5rem;">Rebalance</div>
                            <div style="color: #94a3b8; font-size: 0.9rem;">Increase tech allocation</div>
                    </div>
            </div>
        </div>
            </div>
        </div>
    </div>

    <script>
        // Sample portfolio data
        const portfolioData = [
            {
                ticker: 'AAPL',
                name: 'Apple Inc.',
                shares: 50,
                price: 185.50,
                change: 2.30,
                changePercent: 1.25,
                value: 9275,
                weight: 7.4
            },
            {
                ticker: 'NVDA',
                name: 'NVIDIA Corporation',
                shares: 25,
                price: 485.50,
                change: 12.30,
                changePercent: 2.6,
                value: 12137.5,
                weight: 9.7
            },
            {
                ticker: 'TSLA',
                name: 'Tesla Inc.',
                shares: 30,
                price: 245.80,
                change: 8.90,
                changePercent: 3.8,
                value: 7374,
                weight: 5.9
            },
            {
                ticker: 'MSFT',
                name: 'Microsoft Corporation',
                shares: 40,
                price: 420.15,
                change: 5.20,
                changePercent: 1.25,
                value: 16806,
                weight: 13.4
            },
            {
                ticker: 'GOOGL',
                name: 'Alphabet Inc.',
                shares: 35,
                price: 142.80,
                change: 1.90,
                changePercent: 1.35,
                value: 4998,
                weight: 4.0
            },
            {
                ticker: 'AMZN',
                name: 'Amazon.com Inc.',
                shares: 20,
                price: 155.25,
                change: 3.15,
                changePercent: 2.07,
                value: 3105,
                weight: 2.5
            },
            {
                ticker: 'BTC-USD',
                name: 'Bitcoin',
                shares: 0.5,
                price: 98500,
                change: 2500,
                changePercent: 2.6,
                value: 49250,
                weight: 39.3
            },
            {
                ticker: 'ETH-USD',
                name: 'Ethereum',
                shares: 2.5,
                price: 3250,
                change: 85,
                changePercent: 2.68,
                value: 8125,
                weight: 6.5
            },
            {
                ticker: 'SPY',
                name: 'SPDR S&P 500 ETF',
                shares: 100,
                price: 485.20,
                change: 2.80,
                changePercent: 0.58,
                value: 48520,
                weight: 38.7
            },
            {
                ticker: 'ARKK',
                name: 'ARK Innovation ETF',
                shares: 200,
                price: 78.45,
                change: 2.15,
                changePercent: 2.8,
                value: 15690,
                weight: 12.5
            }
        ];

        // Sample watchlist data
        const watchlistData = [
            { ticker: 'AMD', price: 142.30, change: 4.20, changePercent: 3.0 },
            { ticker: 'PLTR', price: 18.75, change: 0.85, changePercent: 4.7 },
            { ticker: 'COIN', price: 245.60, change: 12.40, changePercent: 5.3 },
            { ticker: 'SOL-USD', price: 185.40, change: 8.90, changePercent: 5.0 },
            { ticker: 'META', price: 485.20, change: 8.50, changePercent: 1.8 }
        ];

        function displayPortfolio(portfolio) {
            const container = document.getElementById('portfolioContainer');
            container.innerHTML = portfolio.map(item => `
                <div class="portfolio-item">
                    <div class="asset-info">
                        <div class="asset-ticker">${item.ticker}</div>
                        <div class="asset-name">${item.name}</div>
                    </div>
                    <div>
                        <div style="color: #e2e8f0; font-weight: bold;">${item.shares} shares</div>
                        <div class="asset-weight">${item.weight.toFixed(1)}% of portfolio</div>
                    </div>
                    <div class="asset-price">$${item.price.toFixed(2)}</div>
                    <div class="asset-change ${item.change >= 0 ? 'positive' : 'negative'}">
                        ${item.change >= 0 ? '+' : ''}$${item.change.toFixed(2)} (${item.changePercent.toFixed(1)}%)
                    </div>
                    <div class="asset-value">$${item.value.toLocaleString()}</div>
                </div>
            `).join('');
        }

        function displayWatchlist(watchlist) {
            const container = document.getElementById('watchlistContainer');
            container.innerHTML = watchlist.map(item => `
                <div class="watchlist-item">
                    <div class="watchlist-ticker">${item.ticker}</div>
                    <div class="watchlist-price">$${item.price.toFixed(2)}</div>
                    <div class="watchlist-change ${item.change >= 0 ? 'positive' : 'negative'}">
                        ${item.change >= 0 ? '+' : ''}$${item.change.toFixed(2)}
                    </div>
                </div>
            `).join('');
        }

        function createPortfolioChart() {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            
            // Sample portfolio performance data
            const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const data = [100000, 102500, 105200, 103800, 108900, 112300, 115600, 118200, 120800, 123400, 125430, 125430];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Portfolio Value',
                        data: data,
                        borderColor: '#60a5fa',
                        backgroundColor: 'rgba(96, 165, 250, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#60a5fa',
                        pointBorderColor: '#60a5fa',
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e2e8f0'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#94a3b8'
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#94a3b8',
                                callback: function(value) {
                                    return '$' + (value / 1000) + 'K';
                                }
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        function addPosition() {
            alert('Add Position functionality would open a modal to add new positions to your portfolio.');
        }

        function importTrading212() {
            // Open Trading212 import page
            window.open('trading212-import.html', '_blank');
        }

        // Load Trading212 portfolio data if available
        function loadTrading212Data() {
            const trading212Data = localStorage.getItem('trading212Portfolio');
            if (trading212Data) {
                const data = JSON.parse(trading212Data);
                
                // Update portfolio summary
                document.querySelector('.summary-card .value').textContent = `$${data.totalValue.toLocaleString()}`;
                document.querySelector('.summary-card .change').textContent = `$${data.totalPnl.toLocaleString()} (${((data.totalPnl / (data.totalValue - data.totalPnl)) * 100).toFixed(1)}%)`;
                document.querySelector('.summary-card .change').className = `change ${data.totalPnl >= 0 ? 'positive' : 'negative'}`;
                
                // Update positions
                displayPortfolio(data.positions.map(pos => ({
                    ticker: pos.ticker,
                    name: pos.ticker,
                    shares: pos.shares,
                    price: pos.currentPrice,
                    change: pos.pnl / pos.shares,
                    changePercent: ((pos.currentPrice - pos.avgPrice) / pos.avgPrice) * 100,
                    value: pos.value,
                    weight: pos.weight
                })));
                
                // Show notification
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: rgba(34, 197, 94, 0.9);
                    color: white;
                    padding: 1rem 2rem;
                    border-radius: 8px;
                    font-weight: bold;
                    z-index: 1000;
                    animation: slideIn 0.3s ease-out;
                `;
                notification.textContent = 'Trading212 portfolio imported successfully!';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // Initialize the page
        displayPortfolio(portfolioData);
        displayWatchlist(watchlistData);
        createPortfolioChart();
        loadTrading212Data(); // Load Trading212 data if available
    </script>
</body>
</html>